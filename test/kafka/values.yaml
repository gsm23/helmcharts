# Default values for kafka.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

######################################################
#Donot change the value of "Name" this is hardcoded  #
Name: kafka                                          #
######################################################
nameSpace: prees
replicaCount: 3
podManagementPolicy: OrderedReady
minAvailable: 3

image:
  repository: confluentinc/cp-kafka
  kafkaversion: 4.1.2
  tag: stable
  pullPolicy: IfNotPresent
  imagePullSecrets:

#  updateStrategy: RollingUpdate
update:
  updateStrategy: OnDelete
  rollingParams:
    updatePeriodSeconds: 10
    intervalSeconds: 1
    timeoutSeconds: 600
    maxSurge: 1                     # how many pods we can add at a time
    maxUnavailable: 0               # maxUnavailable define how many pods can be unavailable during the rolling update
    pre:
       failurePolicy: Abort

Configuration:
  nodeport:
  containerPort: 9090
  "log.dirs": /opt/kafka/data/logs
  "offsets.topic.replication.factor": 3
  # "default.replication.factor": 3
  # "min.insync.replicas": 2
  # "auto.create.topics.enable": false
  "advertised.listeners": |-
   EXTERNAL://${HOST_IP}:$((3090 + ${KAFKA_BROKER_ID}))
  "listener.security.protocol.map": |-
   PLAINTEXT:PLAINTEXT,EXTERNAL:PLAINTEXT

envlists:
  - name: KAFKA_HEAP_OPTS
    value : "-Xms1g -Xmx1g -XX:MetaspaceSize=96m -XX:+UseG1GC -XX:MaxGCPauseMillis=20 -XX:InitiatingHeapOccupancyPercent=35 -XX:G1HeapRegionSize=16M -XX:MinMetaspaceFreeRatio=50 -XX:MaxMetaspaceFreeRatio=80"
  - name: KAFKA_OPTS
    value: "-Dlogging.level=INFO"
  - name: JMX_PORT
    value: "9096"
  - name: KAFKA_JMX_OPTS
    value: ""
  - name: KAFKA_LOG_RETENTION_BITES
    value: "1073741824"
  - name: KAFKA_DELETE_TOPIC_ENABLE
    value: "true"
  - name: KAFKA_NUM_NETWORK_THREADS
    value: 3
  - name: KAFKA_NUM_IO_THREADS
    value: 3
  - name: KAFKA_NUM_REPLICA_FETCHERS
    value: 5
  - name: KAFKA_DEFAULT_REPLICATION_FACTOR
    value: 3
  - name: KAFKA_NUM_PARTITIONS
    value: 3
  - name: KAFKA_BATCH_SIZE
    value: 16384

persistencestorage:
  enabled: true
  size: 1Gi
  # storageClass: ""

## Kafka JVM Heap Configuration Option
HeapOptions:
  heapOptions: "-Xms1G -Xmx1G"
  jmxPort: 5555


nameOverride: ""
fullnameOverride: ""

service:
  type: ClusterIP
  port: 80

ingress:
  enabled: false
  annotations: {}
    # kubernetes.io/ingress.class: nginx
    # kubernetes.io/tls-acme: "true"
  path: /
  hosts:
    - chart-example.local
  tls: []
  #  - secretName: chart-example-tls
  #    hosts:
  #      - chart-example.local

resources: {}
  # We usually recommend not to specify default resources and to leave this as a conscious
  # choice for the user. This also increases chances charts run on environments with little
  # resources, such as Minikube. If you do want to specify resources, uncomment the following
  # lines, adjust them as necessary, and remove the curly braces after 'resources:'.
  # limits:
  #  cpu: 100m
  #  memory: 128Mi
  # requests:
  #  cpu: 100m
  #  memory: 128Mi

nodeSelector: {}

tolerations: []

affinity: {}
